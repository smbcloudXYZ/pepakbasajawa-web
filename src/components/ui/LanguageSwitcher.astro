---
import { getLangFromUrl, getAlternateLanguage, getAlternateUrl, useTranslations } from '@/i18n/utils'
import { languages } from '@/i18n/ui'

const currentLang = getLangFromUrl(Astro.url)
const alternateLang = getAlternateLanguage(currentLang)
const alternateUrl = getAlternateUrl(Astro.url, alternateLang)
const t = useTranslations(currentLang)
---

<div class="language-switcher">
  <a href={alternateUrl} class="lang-link" title={t('language.switch')}>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="2" y1="12" x2="22" y2="12"></line>
      <path
        d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
      ></path>
    </svg>
    <span class="lang-text">{alternateLang.toUpperCase()}</span>
  </a>
</div>

<style>
  .language-switcher {
    display: flex;
    align-items: center;
  }

  .lang-link {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    color: var(--text-secondary);
    text-decoration: none;
    transition: all 0.2s ease-out;
    font-size: var(--font-size-s);
    font-weight: var(--font-weight-medium);
  }

  .lang-link:hover {
    color: var(--text-primary);
    background-color: var(--code-bg);
  }

  .lang-text {
    font-weight: 600;
  }

  svg {
    width: 1.125rem;
    height: 1.125rem;
  }
</style>
